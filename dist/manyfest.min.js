!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Fable=e()}}((function(){return function e(t,s,r){function a(i,n){if(!s[i]){if(!t[i]){var h="function"==typeof require&&require;if(!n&&h)return h(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var p=s[i]={exports:{}};t[i][0].call(p.exports,(function(e){return a(t[i][1][e]||e)}),p,p.exports,e,t,s,r)}return s[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,s){
/**
* @license MIT
* @author <steven@velozo.com>
*/
var r=e("./Manyfest.js");"object"==typeof window&&(window.Manyfest=r),t.exports=r},{"./Manyfest.js":6}],2:[function(e,t,s){
/**
* @license MIT
* @author <steven@velozo.com>
*/
let r=e("./Manyfest-LogToConsole.js");t.exports=class{constructor(e,t){this.logInfo="function"==typeof e?e:r,this.logError="function"==typeof t?t:r,this.translationTable={}}translationCount(){return Object.keys(this.translationTable).length}addTranslation(e){if("object"!=typeof e)return this.logError("Hash translation addTranslation expected a translation be type object but was passed in "+typeof e),!1;Object.keys(e).forEach((t=>{"string"!=typeof e[t]?this.logError(`Hash translation addTranslation expected a translation destination hash for [${t}] to be a string but the referrant was a ${typeof e[t]}`):this.translationTable[t]=e[t]}))}removeTranslationHash(e){this.translationTable.hasOwnProperty(e)&&delete this.translationTable[e]}removeTranslation(e){if("string"==typeof e)return this.removeTranslationHash(e),!0;if("object"==typeof e){return Object.keys(e).forEach((e=>{this.removeTranslation(e)})),!0}return this.logError("Hash translation removeTranslation expected either a string or an object but the passed-in translation was type "+typeof e),!1}clearTranslations(){this.translationTable={}}translate(e){return this.translationTable.hasOwnProperty(e)?this.translationTable[e]:e}}},{"./Manyfest-LogToConsole.js":3}],3:[function(e,t,s){t.exports=(e,t)=>{let s="string"==typeof e?e:"";console.log(`[Manyfest] ${s}`),t&&console.log(JSON.stringify(t))}},{}],4:[function(e,t,s){
/**
* @license MIT
* @author <steven@velozo.com>
*/
let r=e("./Manyfest-LogToConsole.js");t.exports=class{constructor(e,t){this.logInfo="function"==typeof e?e:r,this.logError="function"==typeof t?t:r}cleanWrapCharacters(e,t){return t.startsWith(e)&&t.endsWith(e)?t.substring(1,t.length-1):t}checkAddressExists(e,t){if("object"!=typeof e)return!1;if("string"!=typeof t)return!1;let s=t.indexOf(".");if(-1==s){let s=t.indexOf("["),r=t.indexOf("]");if(s>0&&r>s&&r-s>0){let a=t.substring(0,s).trim();if("object"!=typeof e[a])return!1;let o=t.substring(s+1,r).trim(),i=parseInt(o,10);return Array.isArray(e[a])!=isNaN(i)&&(isNaN(i)?(o=this.cleanWrapCharacters('"',o),o=this.cleanWrapCharacters("`",o),o=this.cleanWrapCharacters("'",o),e[a].hasOwnProperty(o)):i in e[a])}return e.hasOwnProperty(t)}{let r=t.substring(0,s),a=t.substring(s+1),o=r.indexOf("["),i=r.indexOf("]");if(o>0&&i>o&&i-o>0){let t=r.substring(0,o).trim(),s=r.substring(o+1,i).trim(),n=parseInt(s,10);return Array.isArray(e[t])!=isNaN(n)&&(isNaN(n)?(s=this.cleanWrapCharacters('"',s),s=this.cleanWrapCharacters("`",s),s=this.cleanWrapCharacters("'",s),this.checkAddressExists(e[t][s],a)):this.checkAddressExists(e[t][n],a))}return(!e.hasOwnProperty(r)||"object"==typeof e[r])&&(e.hasOwnProperty(r)||(e[r]={}),this.checkAddressExists(e[r],a))}}getValueAtAddress(e,t){if("object"!=typeof e)return;if("string"!=typeof t)return;let s=t.indexOf(".");if(-1==s){let s=t.indexOf("["),r=t.indexOf("]");if(s>0&&r>s&&r-s>0){let a=t.substring(0,s).trim();if("object"!=typeof e[a])return;let o=t.substring(s+1,r).trim(),i=parseInt(o,10);if(Array.isArray(e[a])==isNaN(i))return;return isNaN(i)?(o=this.cleanWrapCharacters('"',o),o=this.cleanWrapCharacters("`",o),o=this.cleanWrapCharacters("'",o),e[a][o]):e[a][i]}return e[t]}{let r=t.substring(0,s),a=t.substring(s+1),o=r.indexOf("["),i=r.indexOf("]");if(o>0&&i>o&&i-o>0){let t=r.substring(0,o).trim(),s=r.substring(o+1,i).trim(),n=parseInt(s,10);if(Array.isArray(e[t])==isNaN(n))return;return isNaN(n)?(s=this.cleanWrapCharacters('"',s),s=this.cleanWrapCharacters("`",s),s=this.cleanWrapCharacters("'",s),this.getValueAtAddress(e[t][s],a)):this.getValueAtAddress(e[t][n],a)}return e.hasOwnProperty(r)&&"object"!=typeof e[r]?void 0:(e.hasOwnProperty(r)||(e[r]={}),this.getValueAtAddress(e[r],a))}}setValueAtAddress(e,t,s){if("object"!=typeof e)return!1;if("string"!=typeof t)return!1;let r=t.indexOf(".");if(-1==r){let r=t.indexOf("["),a=t.indexOf("]");if(r>0&&a>r&&a-r>0){let o=t.substring(0,r).trim();if("object"!=typeof e[o])return!1;let i=t.substring(r+1,a).trim(),n=parseInt(i,10);return Array.isArray(e[o])!=isNaN(n)&&(isNaN(n)?(i=this.cleanWrapCharacters('"',i),i=this.cleanWrapCharacters("`",i),i=this.cleanWrapCharacters("'",i),e[o][i]=s,!0):(e[o][n]=s,!0))}return e[t]=s,!0}{let a=t.substring(0,r),o=t.substring(r+1),i=a.indexOf("["),n=a.indexOf("]");if(i>0&&n>i&&n-i>0){let t=a.substring(0,i).trim(),r=a.substring(i+1,n).trim(),h=parseInt(r,10);return Array.isArray(e[t])!=isNaN(h)&&(isNaN(h)?(r=this.cleanWrapCharacters('"',r),r=this.cleanWrapCharacters("`",r),r=this.cleanWrapCharacters("'",r),this.setValueAtAddress(e[t][r],o,s)):this.setValueAtAddress(e[t][h],o,s))}return e.hasOwnProperty(a)&&"object"!=typeof e[a]?(e.hasOwnProperty("__ERROR")||(e.__ERROR={}),e.__ERROR[t]=s,!1):(e.hasOwnProperty(a)||(e[a]={}),this.setValueAtAddress(e[a],o,s))}}}},{"./Manyfest-LogToConsole.js":3}],5:[function(e,t,s){
/**
* @license MIT
* @author <steven@velozo.com>
*/
let r=e("./Manyfest-LogToConsole.js");t.exports=class{constructor(e,t){this.logInfo="function"==typeof e?e:r,this.logError="function"==typeof t?t:r}resolveAddressMappings(e,t){if("object"!=typeof e)return this.logError("Attempted to resolve address mapping but the descriptor was not an object."),!1;if("object"!=typeof t)return!0;let s=Object.keys(e),r={};return s.forEach((t=>{e[t].hasOwnProperty("Hash")&&(r[e[t].Hash]=t)})),Object.keys(t).forEach((s=>{let a=t[s],o=!1,i=!1;e.hasOwnProperty(s)?o=s:r.hasOwnProperty(s)&&(o=r[s]),o?(i=e[o],delete e[o]):i={Hash:s},e[a]=i})),!0}safeResolveAddressMappings(e,t){let s=JSON.parse(JSON.stringify(e));return this.resolveAddressMappings(s,t),s}mergeAddressMappings(e,t){if("object"!=typeof t||"object"!=typeof e)return this.logError("Attempted to merge two schema descriptors but both were not objects."),!1;let s=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(e));return Object.keys(s).forEach((e=>{r.hasOwnProperty(e)||(r[e]=s[e])})),r}}},{"./Manyfest-LogToConsole.js":3}],6:[function(e,t,s){
/**
* @license MIT
* @author <steven@velozo.com>
*/
let r=e("./Manyfest-LogToConsole.js"),a=e("./Manyfest-ObjectAddressResolver.js"),o=e("./Manyfest-HashTranslation.js"),i=e("./Manyfest-SchemaManipulation.js");class n{constructor(e,t,s,n){this.logInfo="function"==typeof t?t:r,this.logError="function"==typeof s?s:r,this.objectAddressResolver=new a(this.logInfo,this.logError),this.options={strict:!1,defaultValues:{String:"",Number:0,Float:0,Integer:0,Boolean:!1,Binary:0,DateTime:0,Array:[],Object:{},Null:null}},this.scope=void 0,this.elementAddresses=void 0,this.elementHashes=void 0,this.elementDescriptors=void 0,this.reset(),"object"==typeof e&&this.loadManifest(e),this.schemaManipulations=new i(this.logInfo,this.logError),this.hashTranslations=new o(this.logInfo,this.logError)}reset(){this.scope="DEFAULT",this.elementAddresses=[],this.elementHashes={},this.elementDescriptors={}}clone(){let e=JSON.parse(JSON.stringify(this.options)),t=new n(this.getManifest(),this.logInfo,this.logError,e);return t.hashTranslations.addTranslation(this.hashTranslations.translationTable),t}deserialize(e){return this.loadManifest(JSON.parse(e))}loadManifest(e){if("object"!=typeof e)return this.logError(`(${this.scope}) Error loading manifest; expecting an object but parameter was type ${typeof e}.`),!1;if(e.hasOwnProperty("Scope")?"string"==typeof e.Scope?this.scope=e.Scope:this.logError(`(${this.scope}) Error loading scope from manifest; expecting a string but property was type ${typeof e.Scope}.`,e):this.logError(`(${this.scope}) Error loading scope from manifest object.  Property "Scope" does not exist in the root of the object.`,e),e.hasOwnProperty("Descriptors"))if("object"==typeof e.Descriptors){let t=Object.keys(e.Descriptors);for(let s=0;s<t.length;s++)this.addDescriptor(t[s],e.Descriptors[t[s]])}else this.logError(`(${this.scope}) Error loading description object from manifest object.  Expecting an object in 'Manifest.Descriptors' but the property was type ${typeof e.Descriptors}.`,e);else this.logError(`(${this.scope}) Error loading object description from manifest object.  Property "Descriptors" does not exist in the root of the Manifest object.`,e)}serialize(){return JSON.stringify(this.getManifest())}getManifest(){return{Scope:this.scope,Descriptors:JSON.parse(JSON.stringify(this.elementDescriptors))}}addDescriptor(e,t){return"object"==typeof t?(t.hasOwnProperty("Address")||(t.Address=e),this.elementDescriptors.hasOwnProperty(e)||this.elementAddresses.push(e),this.elementDescriptors[e]=t,this.elementHashes[e]=e,t.hasOwnProperty("Hash")?this.elementHashes[t.Hash]=e:t.Hash=e,!0):(this.logError(`(${this.scope}) Error loading object descriptor for address '${e}' from manifest object.  Expecting an object but property was type ${typeof t}.`),!1)}getDescriptorByHash(e){return this.getDescriptor(this.resolveHashAddress(e))}getDescriptor(e){return this.elementDescriptors[e]}checkAddressExistsByHash(e,t){return this.checkAddressExists(e,this.resolveHashAddress(t))}checkAddressExists(e,t){return this.objectAddressResolver.checkAddressExists(e,t)}resolveHashAddress(e){let t,s=this.elementHashes.hasOwnProperty(e),r=this.hashTranslations.translationTable.hasOwnProperty(e);return t=s&&!r?this.elementHashes[e]:r&&this.elementHashes.hasOwnProperty(this.hashTranslations.translate(e))?this.elementHashes[this.hashTranslations.translate(e)]:r?this.hashTranslations.translate(e):e,t}getValueByHash(e,t){return this.getValueAtAddress(e,this.resolveHashAddress(t))}getValueAtAddress(e,t){return this.objectAddressResolver.getValueAtAddress(e,t)}setValueByHash(e,t,s){return this.setValueAtAddress(e,this.resolveHashAddress(t),s)}setValueAtAddress(e,t,s){return this.objectAddressResolver.setValueAtAddress(e,t,s)}validate(e){let t={Error:null,Errors:[],MissingElements:[]};"object"!=typeof e&&(t.Error=!0,t.Errors.push("Expected passed in object to be type object but was passed in "+typeof e));let s=(e,s)=>{t.Error=!0,t.Errors.push(`Element at address "${e}" ${s}.`)};for(let r=0;r<this.elementAddresses.length;r++){let a=this.getDescriptor(this.elementAddresses[r]),o=this.getValueAtAddress(e,a.Address);if(void 0===o&&(t.MissingElements.push(a.Address),(a.Required||this.options.strict)&&s(a.Address,"is flagged REQUIRED but is not set in the object")),a.DataType){let e=typeof o;switch(a.DataType.toString().trim().toLowerCase()){case"string":"string"!=e&&s(a.Address,`has a DataType ${a.DataType} but is of the type ${e}`);break;case"number":"number"!=e&&s(a.Address,`has a DataType ${a.DataType} but is of the type ${e}`);break;case"integer":if("number"!=e)s(a.Address,`has a DataType ${a.DataType} but is of the type ${e}`);else{o.toString().indexOf(".")>-1&&s(a.Address,`has a DataType ${a.DataType} but has a decimal point in the number.`)}break;case"float":"number"!=e&&s(a.Address,`has a DataType ${a.DataType} but is of the type ${e}`);break;case"DateTime":"Invalid Date"==new Date(o).toString()&&s(a.Address,`has a DataType ${a.DataType} but is not parsable as a Date by Javascript`);default:"string"!=e&&s(a.Address,`has a DataType ${a.DataType} (which auto-converted to String because it was unrecognized) but is of the type ${e}`)}}}return t}getDefaultValue(e){if(e.hasOwnProperty("Default"))return e.Default;{let t=e.hasOwnProperty("DataType")?e.DataType:"String";return this.options.defaultValues.hasOwnProperty(t)?this.options.defaultValues[t]:null}}populateDefaults(e,t){return this.populateObject(e,t,(e=>e.hasOwnProperty("Default")))}populateObject(e,t,s){let r="object"==typeof e?e:{},a=void 0!==t&&t,o="function"==typeof s?s:e=>!0;return this.elementAddresses.forEach((e=>{let t=this.getDescriptor(e);o(t)&&(!a&&this.checkAddressExists(r,e)||this.setValueAtAddress(r,e,this.getDefaultValue(t)))})),r}}t.exports=n},{"./Manyfest-HashTranslation.js":2,"./Manyfest-LogToConsole.js":3,"./Manyfest-ObjectAddressResolver.js":4,"./Manyfest-SchemaManipulation.js":5}]},{},[1])(1)}));
//# sourceMappingURL=manyfest.min.js.map
